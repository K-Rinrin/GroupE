{% extends "admin_base.html" %}  
{% load static %}
{% block content %}
<div class="content-container">
    <h1 class="page-title">公式イベント更新</h1>     

    <div class="form-container">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="form-group">
                <label for="event_info">イベント名</label>
                <input type="text" id="event_info" name="event_info" value="{{ object.event_info }}" required>
            </div>

            <div class="form-group">
                <label for="{{ form.venue.id_for_label }}">開催場所（担当お城）</label>
                {# Viewのget_formで設定した選択肢を出すため、Djangoのタグを使います #}
                {{ form.venue }} 
                {% if form.venue.errors %}
                    <span class="error" style="color: red;">{{ form.venue.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="start_date">開始日</label>
                <input type="date" id="start_date" name="start_date" value="{{ object.start_date|date:'Y-m-d' }}" required>
            </div>

            <div class="form-group">
                <label for="end_date">終了日</label>
                <input type="date" id="end_date" name="end_date" value="{{ object.end_date|date:'Y-m-d' }}" required>
            </div>

            <div class="form-group">
                <label>開催時間</label>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="time" id="start_time" name="start_time" value="{{ object.start_time|time:'H:i' }}">
                    <span>〜</span>
                    <input type="time" id="end_time" name="end_time" value="{{ object.end_time|time:'H:i' }}">
                </div>
            </div>

            <div class="form-group">
                <label for="event_overview">イベント説明</label>
                <textarea id="event_overview" name="event_overview" rows="5">{{ object.event_overview }}</textarea>
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" name="public_settings" {% if object.public_settings %}checked{% endif %}> 公開する
                </label>
            </div>

            <div class="form-buttons">
                <button type="submit" class="btn btn-update">更新を保存</button>
                {# 2. 管理者用の一覧へ戻るように変更 #}
                <a href="{% url 'event_info_management:admin_event_info_list' %}" class="btn btn-cancel">キャンセル</a>
            </div>
        </form>
    </div>
</div>

{% endblock %}