{% extends "user_base.html" %}
{% load static %}
{% block content %}

    <!--　お城写真スライダーエリア　-->
    <!-- 
    色んなお城の写真がSlider elementで見ることができる
    写真はお城のDBに入っているデータから持ってくる
    Slider elementはループするように作る
    写真をクリック、もしくは写真のところにある詳細ボタンを押すとそのお城情報ページへ飛ぶ
    -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<div class="top-carousel-container">
    <div class="swiper multiSwiper">
        <div class="swiper-wrapper">
            {% for oshiro in oshiro_list %}
            <div class="swiper-slide castle-card">
                <div class="card-image" style="background-image: url('{{ oshiro.oshiro_images.url }}');">
                    <a href="{% url 'usermy_list:oshiroinfo' oshiro.id %}" class="full-link"></a>
                </div>
                <div class="card-body">
                    <h3 class="castle-title">{{ oshiro.oshiro_name }}</h3>
                    <p class="castle-ex">{{ oshiro.basicinfo.highlights|truncatechars:25 }}</p>
                    <a href="{% url 'usermy_list:oshiroinfo' oshiro.id %}" class="btn-detail-gold">詳細を見る</a>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-pagination"></div>
    </div>
</div>

<hr>



<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<hr>

    <!-- 最新イベント情報エリア-->
    <!-- 最新のイベント情報を表示する
    DBから最新のイベント情報を3件まで持ってきて表示する
    イベント情報にはタイトル、開催期間、簡単な説明文を表示する
    -->

<div class="latest-events-container">
    <h2 class="section-title">最新イベント情報</h2>
    <div class="event-list">
        {% for event in latest_events %}
        <div class="event-item">
            <div class="event-image">
                {% if oshiro.oshiro_images %}
                    <img class="avatar" src="{{ oshiro.oshiro_images.url }}" alt="{{ oshiro.oshiro_name }}">
                {% else %}
                    <img class="avatar" src="{% static 'image/お城ナビアイコン.png' %}" alt="画像なし">
                {% endif %}
            </div>
            <div class="event-content">
                <h3 class="event-title">
                    <span class="arrow">➔</span> {{ event.event_info }}
                </h3>
                <p class="event-description">
                    {{ event.event_overview|truncatechars:50 }}
                </p>
                <small class="event-date">開催：{{ event.start_date|date:"Y/m/d" }} 〜</small>
            </div>
        </div>
        {% empty %}
        <p class="no-events">現在、開催中のイベントはありません。</p>
        {% endfor %}
    </div>
</div>


{% endblock %}
