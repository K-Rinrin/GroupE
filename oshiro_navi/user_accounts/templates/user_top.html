{% extends "user_base.html" %}
{% load static %}
{% block content %}

    <!--　お城写真スライダーエリア　-->
    <!-- 
    色んなお城の写真がSlider elementで見ることができる
    写真はお城のDBに入っているデータから持ってくる
    Slider elementはループするように作る
    写真をクリック、もしくは写真のところにある詳細ボタンを押すとそのお城情報ページへ飛ぶ
    -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<div class="top-carousel-container">
    <div class="swiper multiSwiper">
        <div class="swiper-wrapper">
            {% for oshiro in oshiro_list %}
            <div class="swiper-slide castle-card">
                <div class="card-image" style="background-image: url('{{ oshiro.oshiro_images.url }}');">
                    <a href="{% url 'usermy_list:oshiroinfo' oshiro.id %}" class="full-link"></a>
                </div>
                <div class="card-body">
                    <h3 class="castle-title">{{ oshiro.oshiro_name }}</h3>
                    <p class="castle-ex">{{ oshiro.basicinfo.highlights|truncatechars:25 }}</p>
                    <a href="{% url 'usermy_list:oshiroinfo' oshiro.id %}" class="btn-detail-gold">詳細を見る</a>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-pagination"></div>
    </div>
</div>

<hr>



<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<hr>

    <!-- 最新イベント情報エリア-->
    <!-- 今週のイベント情報を表示する-->

<div class="latest-events-container">
    <h2 class="section-title">今週のイベント</h2>
    <div class="event-list">
        {% for event in latest_events %}
        <div class="event-item" style="background-color: #888; border: 1px solid #eee; padding: 15px; margin-bottom: 10px; display: flex;">
            <div class="event-content" style="flex: 1;">
                <p class="event-date-range" style="color: #888; font-size: 0.9em;">
                    {{ event.start_date|date:"Y/m/d" }}（{{ event.start_date|date:"D" }}）
                    〜 {{ event.end_date|date:"Y/m/d" }}（{{ event.end_date|date:"D" }}）
                </p>
                <h3 class="event-title" style="margin: 5px 0;">
                    <span class="badge" style="background: #eee; padding: 2px 5px; font-size: 0.8em;">姫路城</span> 
                    {{ event.event_info }}
                </h3>
                <p class="event-description">
                    {{ event.event_overview|truncatechars:100 }}
                </p>
                <div class="event-details" style="font-size: 0.85em; background: #f9f9f9; padding: 10px;">
                    <div><strong>会場名：</strong>{{ event.venue_name|default:"姫路城" }}</div>
                    </div>
            </div>
            
            <div class="event-image" style="width: 150px; margin-left: 15px;">
                {% if event.event_image %}
                    <img src="{{ event.event_image.url }}" alt="{{ event.event_info }}" style="width: 100%;">
                {% else %}
                    <img src="{% static 'image/default_castle.jpg' %}" alt="画像なし" style="width: 100%;">
                {% endif %}
            </div>
        </div>
        {% empty %}
        <p class="no-events">今週開催予定のイベントはありません。</p>
        {% endfor %}
    </div>
</div>


{% endblock %}
