{% extends "user_base.html" %}
{% load static %}

{% block title %}
    {% if oshiro %}{{ oshiro.oshiro_name }}ã®ãƒ¢ãƒ‡ãƒ«ã‚³ãƒ¼ã‚¹{% else %}ãƒ¢ãƒ‡ãƒ«ã‚³ãƒ¼ã‚¹ä¸€è¦§{% endif %}
{% endblock %}

{% block content %}
<div class="mypage-container model-course-container">

    {% if oshiro %}
        <h1 class="page-title">{{ oshiro.oshiro_name }} ã®ãƒ¢ãƒ‡ãƒ«ã‚³ãƒ¼ã‚¹</h1>
        
        <!--  ã‚«ãƒ†ã‚´ãƒªé¸æŠ -->
        <div class="category-tabs">
            <a href="?oshiro_id={{ oshiro_id }}&difficulty=" 
               class="tab-item {% if not current_difficulty %}active{% endif %}">
               ã™ã¹ã¦
            </a>
            
            <!-- åˆå¿ƒè€…å‘ã‘ -->
            <a href="?oshiro_id={{ oshiro_id }}&difficulty=åˆå¿ƒè€…å‘ã‘" 
               class="tab-item {% if current_difficulty == 'åˆå¿ƒè€…å‘ã‘' %}active{% endif %}">
               åˆå¿ƒè€…å‘ã‘
            </a>

            <!-- çŸ­æ™‚é–“æ»åœ¨è€…å‘ã‘ -->
            <a href="?oshiro_id={{ oshiro_id }}&difficulty=çŸ­æ™‚é–“æ»åœ¨è€…å‘ã‘" 
               class="tab-item {% if current_difficulty == 'çŸ­æ™‚é–“æ»åœ¨è€…å‘ã‘' %}active{% endif %}">
               çŸ­æ™‚é–“æ»åœ¨è€…å‘ã‘
            </a>

            <!-- é•·æ™‚é–“æ»åœ¨è€…å‘ã‘ -->
            <a href="?oshiro_id={{ oshiro_id }}&difficulty=é•·æ™‚é–“æ»åœ¨è€…å‘ã‘" 
               class="tab-item {% if current_difficulty == 'é•·æ™‚é–“æ»åœ¨è€…å‘ã‘' %}active{% endif %}">
               é•·æ™‚é–“æ»åœ¨è€…å‘ã‘
            </a>
        </div>

        <div class="result-area">
            <div class="result-header">
                è©²å½“ï¼š<span class="count-number">{{ courses|length }}</span> ä»¶
            </div>

            <ul class="castle-result-list">
                {% for course in courses %}
                <li class="result-item" style="border:1px solid #ddd; padding:15px; margin-bottom:15px; border-radius:8px; list-style:none;">
                    <div class="result-info">
                        <h3 class="result-name" style="margin:0 0 10px 0;">{{ course.model_course_name }}</h3>
                        
                        <div class="course-badges" style="margin-bottom:10px; font-size:0.9em; color:#666;">
                            <span class="difficulty-label">{{ course.difficulty }}</span>
                            <span style="margin-left:10px;">â± {{ course.required_time|time:"G:i" }}</span>
                            <span style="margin-left:10px;">ğŸ“ {{ course.distance }}km</span>
                        </div>

                        <p style="font-size:0.9em; color:#444;">{{ course.course_overview|truncatechars:50 }}</p>
                    </div>
                    
                    <div style="text-align:right; margin-top:10px;">
                        <a href="{% url 'user_model_course:modelcoursedetail' %}?pk={{ course.pk }}" class="btn-detail-small" style="text-decoration:none; background:#333; color:#fff; padding:5px 15px; border-radius:4px;">
                            è©³ç´°ã‚’è¦‹ã‚‹
                        </a>
                    </div>
                </li>
                {% empty %}
                <li class="no-result-msg" style="padding: 20px; text-align: center; color: #666;">
                    è©²å½“ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚³ãƒ¼ã‚¹ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
                </li>
                {% endfor %}
            </ul>
            
            <div style="margin-top:30px; text-align:center;">
                <a href="{% url 'user_model_course:modelcoursechoose' %}">ãŠåŸé¸æŠã«æˆ»ã‚‹</a>
            </div>
        </div>

    {% else %}
        <div style="text-align: center; padding: 50px;">
            <p>ãŠåŸãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
            <a href="{% url 'user_model_course:modelcoursechoose' %}">æ¤œç´¢ç”»é¢ã¸æˆ»ã‚‹</a>
        </div>
    {% endif %}

</div>


<style>
    /* ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ– */
    .category-tabs {
        display: flex;
        flex-wrap: wrap; /* ã‚¹ãƒãƒ›ã§æŠ˜ã‚Šè¿”ã™ */
        gap: 10px;
        border-bottom: 2px solid #ddd;
        margin-bottom: 20px;
        padding-bottom: 10px;
    }
    
    .tab-item {
        padding: 8px 16px;
        text-decoration: none;
        color: #555;
        border-radius: 20px; /* è§’ä¸¸ãƒœã‚¿ãƒ³é¢¨ */
        background-color: #f0f0f0;
        font-size: 0.9em;
        transition: all 0.3s;
    }

    .tab-item:hover {
        background-color: #e0e0e0;
    }

    /* é¸æŠä¸­ã®ã‚¿ãƒ– */
    .tab-item.active {
        background-color: #d4a024; /* ãŠåŸãƒ†ãƒ¼ãƒè‰²ï¼ˆé‡‘/èŒ¶ï¼‰ */
        color: white;
        font-weight: bold;
    }

    /* é›£æ˜“åº¦ãƒ©ãƒ™ãƒ« */
    .difficulty-label {
        background-color: #eee;
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: bold;
        font-size: 0.85em;
    }
</style>

{% endblock %}