{% extends "user_base.html" %}
{% load static %}
{% block title %}{% endblock %}
{% block content %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>モデルコース検索</title>
</head>
<body>

<h1>モデルコース</h1>

<!-- 検索エリア -->
<div class="search-area">
    <select id="prefecture">
        <option value="">都道府県を選択</option>
        <option value="fukushima">福島県</option>
        <option value="aomori">青森県</option>
    </select>

    <select id="castle">
        <option value="">お城を選択</option>
    </select>

    <button onclick="search()">検索</button>
</div>

<!-- 検索結果 -->
<div class="result-area">
    <div class="result-header">
        該当：<span id="count">0</span>件
    </div>

    <ul class="castle-list" id="result">
        <!-- JSで生成 -->
    </ul>
</div>

<script>
    // 仮データ（あとでDBから取得する想定）
    const castlesByPrefecture = {
        fukushima: [
            { id: 1, name: "鶴ヶ城" },
            { id: 2, name: "二本松城" },
            { id: 3, name: "白河小峰城" }
        ],
        aomori: [
            { id: 4, name: "弘前城" }
        ]
    };

    const prefectureSelect = document.getElementById("prefecture");
    const castleSelect = document.getElementById("castle");
    const resultArea = document.getElementById("result");
    const countSpan = document.getElementById("count");

    // 都道府県選択 → お城プルダウン更新
    prefectureSelect.addEventListener("change", () => {
        castleSelect.innerHTML = '<option value="">お城を選択</option>';

        const pref = prefectureSelect.value;
        if (!pref) return;

        castlesByPrefecture[pref].forEach(castle => {
            const option = document.createElement("option");
            option.value = castle.id;
            option.textContent = castle.name;
            castleSelect.appendChild(option);
        });
    });

    // 検索処理（画面表示のみ）
    function search() {
        resultArea.innerHTML = "";

        const pref = prefectureSelect.value;
        const castleId = castleSelect.value;

        let results = [];

        if (pref) {
            results = castlesByPrefecture[pref];
        }

        if (castleId) {
            results = results.filter(c => c.id == castleId);
        }

        results.forEach(castle => {
            const li = document.createElement("li");
            li.className = "castle-item";
            li.innerHTML = `
                <span>${castle.name}</span>
                <a href="#" class="detail-btn">詳細</a>
            `;
            resultArea.appendChild(li);
        });

        countSpan.textContent = results.length;
    }
</script>

</body>
</html>

{% endblock %}