{% extends "operator_base.html" %}
{% load static %}
{% block title %}お城情報登録{% endblock %}
{% block content %}
<div class="content-container">
  <h1 class="page-title">お城情報更新</h1>

  {% if error %}
    <p style="color:red; font-weight:bold;">{{ error }}</p>
  {% endif %}

  <!-- ✅ update にPOSTする（成功画面へは views.py が redirect する） -->
  <form action="{% url 'operator_oshiro_info:update' %}" method="POST">
    {% csrf_token %}

    <!-- ✅ 更新対象ID（必須） -->
    <input type="hidden" name="id" value="{{ oshiro.id }}">

    <!-- お城名 -->
    <div class="form-group">
      <label for="oshiro_name">お城名</label>
      <input type="text" id="oshiro_name" name="oshiro_name"
             value="{{ oshiro.oshiro_name }}" required>
    </div>

    <!-- 築城年 -->
    <div class="form-group">
      <label for="built_year">築城年</label>
      <input type="number" id="built_year" name="built_year"
             value="{{ oshiro.built_year }}" required>
    </div>

    <!-- 住所 -->
    <div class="form-group">
      <label for="address">住所</label>
      <input type="text" id="address" name="address"
             value="{{ oshiro.address }}" required>
    </div>

    <!-- 構造 -->
    <div class="form-group">
      <label for="structure">構造</label>
      <input type="text" id="structure" name="structure"
             value="{{ oshiro.structure }}" required>
    </div>

    <!-- 遺構 -->
    <div class="form-group">
      <label for="ruins">遺構</label>
      <input type="text" id="ruins" name="ruins"
             value="{{ oshiro.ruins }}" required>
    </div>
    <div class="form-group">
      <label for="latitude">緯度</label>
      <input type="text" id="latitude" name="latitude"
             value="{{ oshiro.latitude }}" required>
    </div>
    <div class="form-group">
      <label for="longitude">経度</label>
      <input type="text" id="longitude" name="longitude"
             value="{{ oshiro.longitude }}" required>
    </div>

    <!-- ボタン -->
    <div class="form-buttons">
      <button type="submit" class="btn-register">更新</button>

      <!-- ✅ 戻る -->
      <a href="{% url 'operator_oshiro_info:list' %}" class="btn-cancel">戻る</a>

      <!-- cancelボタン方式にしたいなら（viewsが対応してる） -->
      <!-- <button type="submit" name="cancel" value="1" class="btn-cancel">戻る</button> -->
    </div>
  </form>
</div>
{% endblock %}