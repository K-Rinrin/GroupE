{% extends "operator_base.html" %}
{% block title %}基本情報一覧{% endblock %}

{% block content %}
<div class="content-container">
    <h1>お城情報一覧</h1>

    <a href="{% url 'operator_oshiro_info:register' %}" class="btn btn-register">
        新規お城登録
    </a>

    <hr style="width: 100%;">

    <table class="basic-info-table">
        <thead>
            <tr>
                <th>城名</th>
                <th>築城年</th>
                <th>住所</th>
                <th>構造</th>
                <th>遺構</th>
                <th>緯度</th>
                <th>経度</th>
                <th>操作</th>
            </tr>
        </thead>

        <tbody>
            {% for o in oshiros %}
            <tr class="basic-info-card">
                <td class="castle-name"><strong>{{ o.oshiro_name }}</strong></td>
                <td class="castle-row">{{ o.built_year }}年</td>
                <td class="castle-row">{{ o.address }}</td>
                <td class="castle-row">{{ o.structure }}</td>
                <td class="castle-row">{{ o.ruins }}</td>

                <!-- ✅ 追加：未入力なら - 表示 -->
                <td class="castle-row">
                    {% if o.latitude is not None %}
                        {{ o.latitude|floatformat:6 }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td class="castle-row">
                    {% if o.longitude is not None %}
                        {{ o.longitude|floatformat:6 }}
                    {% else %}
                        -
                    {% endif %}
                </td>

                <td class="basic-info-actions">
                    <!-- ✅ update は ?id= が必要 -->
                    <a href="{% url 'operator_oshiro_info:update' %}?id={{ o.id }}" class="btn-update">
                        更新
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="8" style="text-align:center; padding:16px;">
                    登録されているお城情報はありません。
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
