{% extends "operator_base.html" %}
{% load static %}
{% block title %}お城情報登録{% endblock %}
{% block content %}
<div class="content-container">
  <h1 class="page-title">お城情報登録</h1>

  {% if error %}
    <p style="color:red; font-weight:bold;">{{ error }}</p>
  {% endif %}

  <!-- ✅ register にPOSTする（成功画面へは views.py が redirect する） -->
  <form action="{% url 'operator_oshiro_info:register' %}" method="POST" enctype="multipart/form-data">

    {% csrf_token %}

    <!-- お城名 -->
    <div class="form-group">
      <label for="oshiro_name">お城名</label>
      <input type="text" id="oshiro_name" name="oshiro_name" required>
    </div>

    <!-- 築城年 -->
    <div class="form-group">
      <label for="built_year">築城年</label>
      <input type="number" id="built_year" name="built_year" required>
    </div>

    <!-- 住所 -->
    <div class="form-group">
      <label for="address">住所</label>
      <input type="text" id="address" name="address" required>
    </div>

    <!-- 構造 -->
    <div class="form-group">
      <label for="structure">構造</label>
      <input type="text" id="structure" name="structure" required>
    </div>

    <!-- 遺構 -->
    <div class="form-group">
      <label for="ruins">遺構</label>
      <input type="text" id="ruins" name="ruins" required>
    </div>

    <div class="form-group">
      <label for="oshiro_images">お城画像</label>
      <input type="file" id="oshiro_images" name="oshiro_images" accept="image/*" required>
    </div> 

    <!-- 緯度・経度 -->
     <div class="form-group">
      <label for="latitude">緯度</label>
      <input type="text" id="latitude" name="latitude"
             value="{{ oshiro.latitude }}" required>
    </div>
    <div class="form-group">
      <label for="longitude">経度</label>
      <input type="text" id="longitude" name="longitude"
             value="{{ oshiro.longitude }}" required>
    </div>

    <!-- ボタン -->
    <div class="form-buttons">
      <button type="submit" class="btn-register">登録</button>

      <!-- 戻るはGETで一覧へ -->
      <a href="{% url 'operator_oshiro_info:list' %}" class="btn-cancel">戻る</a>

      <!--  cancelボタン方式にしたいなら（viewsが対応している） -->
      <!-- <button type="submit" name="cancel" value="1" class="btn-cancel">戻る</button> -->
    </div>
  </form>
</div>
{% endblock %}